<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Seguro Fiança</title>
    <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
    <h1>Seguro Fiança</h1>
    <h2>Status do Contrato</h2>
    <div>O contrato é: 0x77f7a8540Cd5bDCfc1027D6c37A9Fabcb3877d4a</div>
    <div>A situação de pagamento é: <span id="campoStatus">&nbsp;</span></div>
    <div>O valor do aluguel é: <span id="campoValorAluguel">&nbsp;</span></div>
    <hr>
    <h1>Formulário de status do contrato</h1>
    <form action="#" method="get" id="frmStatus" name="frmStatus" onsubmit="registrarMudancaStatus(); return false;">
        <div>
            <label for="txtStatusPagamentoAluguel">Informe o novo Status: </label>
            <input type="text" name="txtStatusPagamentoAluguel" id="txtStatusPagamentoAluguel" maxlength="8">
        </div>
        <div>
            &nbsp;
        </div>
        <div>
            <button type="submit">Registrar Novo Status</button>
        </div>
        <div><br><hr></div>
        <div id="caixaStatusTx">
            &nbsp;
        </div>
       
        <h1>Status do contrato - Ativo ou Encerrado</h1>
        <div>O contrato está ativo? <span id="campoFimDoContrato">&nbsp;</span></div>
        
        <form action="#" method="get" id="frmFimDoContrato" name="frmFimDoContrato" onsubmit="registrarContratoEncerrado(); return false;">
            <div>
                    &nbsp;
            </div>
            
            <div>
                <button type="submit">Encerrar contrato</button>
            </div>
            <div><br><hr></div>
            <div id="caixaStatusTx">
                &nbsp;
            </div>    
    </form>
    <p>&nbsp;</p>
    <script charset="utf-8"  src="https://cdn.ethers.io/scripts/ethers-v4.min.js" type="text/javascript"></script>
    <script src="javascript/abi.js"></script>    
    <script src="javascript/blockchain.js"></script>    
    <script>
        var status;
        var campoStatus = document.getElementById("campoStatus"); 
        var campoValorAluguel = document.getElementById("campoValorAluguel");
        var campoFimDoContrato = document.getElementById("campoFimDoContrato");
        contrato.statusPagamentoAluguel()
            .then( (resultado) => {
                campoStatus.innerHTML = resultado;
            })
            .catch( (err) => {
                console.error(err);
                campoStatus.innerHTML = err;
            });   
        contrato.valorAluguel()
            .then( (valorAluguel) => {
                campoValorAluguel.innerHTML = valorAluguel;
            })
            .catch( (err) => {
                console.error(err);
                campoValorAluguel.innerHTML = err;
            });         
        contrato.contratoAtivo()
            .then( (resultado) => {
                campoFimDoContrato.innerHTML = resultado;
            })
            .catch( (err) => {
                console.error(err);
                campoFimDoContrato.innerHTML = err;
        });                                                                    
        </script>
</script>
</body>
</html>
